<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Saga Coquerel - V36</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#4e342e">

    <style>
        :root { --primary: #4e342e; --secondary: #5D4037; --gold: #B8860B; --bg: #fcfbf8; --card: #ffffff; }
        
        body { font-family: 'Georgia', serif; background: var(--bg); margin: 0; padding-bottom: 95px; color: #222; -webkit-tap-highlight-color: transparent; }

        header { background: var(--primary); color: white; padding: 20px 15px; text-align: center; border-bottom: 4px solid var(--gold); position: sticky; top: 0; z-index: 1000; }
        h1 { margin: 0; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; }

        /* NAVIGATION BASSE */
        nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; border-top: 1px solid #ddd; box-shadow: 0 -2px 15px rgba(0,0,0,0.1); z-index: 1000; padding-bottom: env(safe-area-inset-bottom); }
        .nav-item { flex: 1; text-align: center; padding: 12px 0; font-size: 0.55rem; color: #888; text-decoration: none; display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .nav-item.active { color: var(--gold); font-weight: bold; }
        .nav-icon { font-size: 1.2rem; margin-bottom: 2px; }

        .container { max-width: 800px; margin: 0 auto; padding: 15px; }
        .page { display: none; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }

        /* GRILLES ET VIGNETTES */
        .grid-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .vignette { background: white; border-radius: 12px; padding: 12px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-top: 4px solid var(--primary); cursor: pointer; display: flex; flex-direction: column; justify-content: center; min-height: 80px; }
        .vignette-title { font-size: 0.8rem; font-weight: bold; color: var(--primary); line-height: 1.2; }
        .vignette-badge { font-size: 0.55rem; text-transform: uppercase; color: var(--gold); font-weight: bold; margin-bottom: 4px; }

        /* VUES D√âTAILS */
        .detail-view { display: none; }
        .back-btn { background: var(--primary); color: white; border: none; padding: 10px 18px; border-radius: 25px; font-size: 0.8rem; margin-bottom: 15px; cursor: pointer; }
        .content-card { background: var(--card); border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); border-left: 6px solid var(--primary); padding: 20px; }

        .sec-title { color: var(--gold); font-size: 0.85rem; font-weight: bold; margin-top: 20px; border-bottom: 1px solid #eee; text-transform: uppercase; padding-bottom: 3px; }
        .text-body { font-size: 0.95rem; line-height: 1.6; text-align: justify; margin-top: 8px; color: #333; }

        /* GLOSSAIRE */
        .glos-link { color: var(--gold); font-weight: bold; text-decoration: none; border-bottom: 1px dotted var(--gold); cursor: pointer; }
        .glos-item { background: white; padding: 22px; border-radius: 12px; margin-bottom: 18px; border-left: 5px solid var(--gold); box-shadow: 0 2px 10px rgba(0,0,0,0.06); scroll-margin-top: 100px; }
        .glos-item b { display: block; color: var(--primary); font-size: 1.15rem; margin-bottom: 5px; }
        .glos-item i { color: var(--gold); font-size: 0.85rem; display: block; margin-bottom: 12px; font-style: italic; }
        .glos-item p { margin: 0; font-size: 0.95rem; line-height: 1.6; color: #333; }

        /* FRISE & ZOOM */
        .frise-img { width: 100%; border-radius: 8px; border: 2px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 15px; cursor: zoom-in; }
        #zoom-modal { display: none; position: fixed; z-index: 2000; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); align-items: center; justify-content: center; }
        #zoom-modal img { max-width: 95%; max-height: 95%; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<header>
    <h1 id="app-title">Saga Coquerel</h1>
</header>

<div class="container">
    
    <div id="ancetres" class="page active">
        <div id="gen-list" class="grid-menu"></div>
        <div id="gen-detail" class="detail-view">
            <button class="back-btn" onclick="closeDetail('ancetres')">‚Üê Retour</button>
            <div id="gen-content"></div>
        </div>
    </div>

    <div id="origine" class="page">
        <div id="orig-menu" class="grid-menu"></div>
        <div id="orig-detail" class="detail-view">
            <button class="back-btn" onclick="closeDetail('origine')">‚Üê Retour</button>
            <div id="orig-content"></div>
        </div>
    </div>

    <div id="frise" class="page">
        <h2 style="color:var(--primary); text-align:center; font-size:1rem;">Archives & Chronologie</h2>
        <img src="image1.jpg" class="frise-img" onclick="openZoom(this.src)">
        <img src="image2.jpg" class="frise-img" onclick="openZoom(this.src)">
        <div style="overflow-x:auto; margin-top:20px;">
            <table style="width:100%; border-collapse:collapse; font-size:0.75rem; background:white;">
                <tbody id="timeline-body"></tbody>
            </table>
        </div>
    </div>

    <div id="lenom" class="page">
        <div class="content-card">
            <h2 style="color:var(--primary); margin-top:0; font-size:1.2rem;">√âtymologie & Signification</h2>
            <p class="text-body">Le patronyme <strong>COQUEREL</strong> est une formation onomastique typique du vieux fran√ßais m√©di√©val, issue du radical <em>Coq</em> (du bas-latin <em>coccus</em>) compl√©t√© par le suffixe diminutif et affectif <em>-erel</em>.</p>
            <p class="text-body"><strong>Le "Petit Coq" :</strong> Au XIIe si√®cle, ce nom servait de surnom pour d√©signer un homme caract√©ris√© par sa vivacit√©, sa fiert√© ou son temp√©rament combatif. C'est un nom de caract√®re qui √©voque la vaillance paysanne.</p>
            <p class="text-body"><strong>Lien avec la Coquerelle :</strong> Dans certaines provinces, la "coquerelle" d√©signait √©galement la plante <em>Physalis</em> (Amour-en-cage), reconnaissable √† son fruit rouge prot√©g√© par une membrane √©voquant la cr√™te du gallinac√©e.</p>
            <div class="sec-title">Ancrage R√©gional</div>
            <p class="text-body">Le nom est un marqueur fort du Nord-Ouest, avec une densit√© historique en Seine-Maritime (76) et dans la Somme (80).</p>
        </div>
    </div>

    <div id="glossaire" class="page">
        <div id="glossaire-content"></div>
    </div>

</div>

<div id="zoom-modal" onclick="closeZoom()">
    <img id="zoom-img">
</div>

<nav>
    <div class="nav-item active" onclick="showPage('ancetres', this)">
        <span class="nav-icon">üë§</span><span>Histoire</span>
    </div>
    <div class="nav-item" onclick="showPage('origine', this)">
        <span class="nav-icon">‚õµ</span><span>Origine</span>
    </div>
    <div class="nav-item" onclick="showPage('frise', this)">
        <span class="nav-icon">üìÖ</span><span>Frise</span>
    </div>
    <div class="nav-item" onclick="showPage('lenom', this)">
        <span class="nav-icon">üõ°Ô∏è</span><span>Le Nom</span>
    </div>
    <div class="nav-item" onclick="showPage('glossaire', this)">
        <span class="nav-icon">üìñ</span><span>Glossaire</span>
    </div>
</nav>

<script>
    // --- 1. DONN√âES ORIGINES (SYNTH√àSE PDF) ---
    const origines = [
        {
            title: "L'H√©ritage Viking et l'√âmergence en Normandie (Xe - XIe si√®cles)",
            badge: "911-1066",
            content: `
                <p class="text-body">Tout commence par un m√©tissage profond entre les envahisseurs scandinaves et les populations locales[cite: 3].</p>
                <div class="sec-title">911 : Trait√© de Saint-Clair-sur-Epte</div>
                <p class="text-body">Le chef viking Rollon re√ßoit la Normandie. Les anc√™tres des Coquerel s'installent dans ce "creuset" normand[cite: 5].</p>
                <div class="sec-title">Le M√©tissage</div>
                <p class="text-body">Bien que le nom soit d'origine romane (du bas-latin <em>coccus</em> pour "coq"), la lign√©e est biologiquement li√©e aux Vikings par des mariages avec les femmes gallo-franques[cite: 6]. En deux g√©n√©rations, ils adoptent la langue fran√ßaise et la religion chr√©tienne tout en gardant le temp√©rament guerrier nordique[cite: 7, 8].</p>
                <div class="sec-title">Le Berceau</div>
                <p class="text-body">La famille s'implante solidement dans la Haute-Normandie, particuli√®rement dans le Pays de Caux et pr√®s de Lisieux[cite: 9].</p>
            `
        },
        {
            title: "La Conqu√™te de l'Angleterre et l'Installation (1066 - 1086)",
            badge: "Hastings",
            content: `
                <div class="sec-title">1066 : Bataille d'Hastings</div>
                <p class="text-body">Des membres de la famille rejoignent l'arm√©e de Guillaume le Conqu√©rant[cite: 12]. Ils font partie de la petite noblesse chevaleresque[cite: 13].</p>
                <div class="sec-title">1086 : Le Domesday Book</div>
                <p class="text-body">La preuve historique de leur succ√®s est grav√©e dans ce grand recensement : un certain Walter Cockerel (ou Gualterius) est enregistr√© comme propri√©taire terrien[cite: 13, 14].</p>
                <div class="sec-title">Les Fiefs Anglais</div>
                <p class="text-body">La famille re√ßoit des terres dans le Gloucestershire, notamment √† Icomb et Sezincote, en r√©compense de leur fid√©lit√© au roi[cite: 15].</p>
            `
        },
        {
            title: "L'√âvolution du Nom : De la Normandie √† l'Angleterre",
            badge: "Onomastique",
            content: `
                <div class="sec-title">Coquerel (France)</div>
                <p class="text-body">Diminutif de "coq", d√©signant un individu fier ou combatif[cite: 18].</p>
                <div class="sec-title">Cockerell / Cockerill (Angleterre)</div>
                <p class="text-body">Sous l'influence des scribes anglais et de la prononciation locale, le "qu" dur devient "ck" et le suffixe est anglicis√©[cite: 19]. La famille s'int√®gre √† l'√©lite anglo-normande et se fond dans la population anglaise[cite: 20].</p>
            `
        },
        {
            title: "Les Lieux Embl√©matiques (Traces de Pierre)",
            badge: "Patrimoine",
            content: `
                <div class="sec-title">Le Manoir de Coquerel (Milly, Manche)</div>
                <p class="text-body">Si√®ge d'une ancienne seigneurie et berceau d'une branche importante[cite: 23].</p>
                <div class="sec-title">Le Domaine de Coquer√©aumont (Seine-Maritime)</div>
                <p class="text-body">Situ√© dans le Pays de Caux, t√©moignant de l'implantation originelle dans cette zone de forte influence viking[cite: 24].</p>
                <div class="sec-title">L'√âglise de Milly</div>
                <p class="text-body">Lieu probable de s√©pultures familiales sous l'Ancien R√©gime[cite: 25].</p>
            `
        },
        {
            title: "Sources Documentaires Utilis√©es",
            badge: "R√©f√©rences",
            content: `
                <ul class="text-body">
                    <li>Domesday Book (1086)[cite: 28].</li>
                    <li>Dictionary of English Surnames[cite: 29].</li>
                    <li>Patronymica Britannica[cite: 31].</li>
                    <li>The Battle Abbey Roll[cite: 32].</li>
                    <li>Archives D√©partementales de la Seine-Maritime[cite: 33].</li>
                </ul>
            `
        }
    ];

    // --- 2. DONN√âES HISTOIRE (RESTAURATION INT√âGRALE DES TEXTES + DATES) ---
    const generations = [
        {
            gen: "I", name: "Pierre COQUEREL (l'Ancien)", dates: "Naissance v. 1575 | D√©c√®s v. 1630 (v. 55 ans)", spouse: "Marie GORAN",
            contexte: `Il na√Æt durant les <span class="glos-link" onclick="goToGlos('religion')">Guerres de Religion</span>. Il voit la paix revenir avec <span class="glos-link" onclick="goToGlos('henri4')">Henri IV</span> et l'<span class="glos-link" onclick="goToGlos('nantes')">√âdit de Nantes</span>.`,
            social: `Il est <strong>Laboureur</strong>, signifiant qu'il appartient √† l'aristocratie paysanne poss√©dant train de culture et b√™tes de trait.`,
            techno: `L'agriculture est manuelle et p√©nible. Le village d'Aubervilliers est alors un lieu de p√®lerinage c√©l√®bre.`
        },
        {
            gen: "II", name: "Pierre COQUEREL", dates: "Naissance 1618 | D√©c√®s 13 mai 1653 (35 ans)", spouse: "Marie MAHEUT (D√©c√®s 1654)",
            contexte: `√âpoque de <span class="glos-link" onclick="goToGlos('richelieu')">Richelieu</span>. Il subit les pillages de <span class="glos-link" onclick="goToGlos('fronde')">La Fronde</span>, guerre civile violente.`,
            social: `Les r√©coltes sont r√©guli√®rement r√©quisitionn√©es par les arm√©es assi√©geant Paris.`,
            defis: `Survivre aux mercenaires de passage et maintenir l'exploitation malgr√© le chaos.`
        },
        {
            gen: "III", name: "Christophe COQUEREL", dates: "Naissance 1624 | D√©c√®s 13 mai 1657 (33 ans)", spouse: "Jeanne LEBOUT (1622 - 1670)",
            contexte: `Jeunesse de <span class="glos-link" onclick="goToGlos('louis14')">Louis XIV</span>.`,
            defis: `Il meurt √† 32 ans, laissant sa veuve Jeanne diriger seule la ferme Coquerel. C'est un d√©fi majeur pour l'√©poque.`,
            techno: `Le travail physique est ext√©nuant, l'hygi√®ne reste pr√©caire.`
        },
        {
            gen: "IV", name: "Jacques COQUEREL", dates: "Naissance 14 jan. 1652 | D√©c√®s 27 juin 1720 (68 ans)", spouse: "Catherine LEBOUT",
            contexte: `Il survit au terrible <span class="glos-link" onclick="goToGlos('hiver1709')">Grand Hiver de 1709</span>.`,
            social: `Notable rural d'Aubervilliers, unissant les plus puissantes lign√©es de cultivateurs locaux.`,
            techno: `Mise en r√©serve des semences pour parer √† la famine effroyable de 1710.`
        },
        {
            gen: "V", name: "Claude COQUEREL", dates: "Naissance 20 avr. 1696 | D√©c√®s 15 d√©c. 1763 (67 ans)", spouse: "Marguerite BOULAN (D√©c√®s 1773)",
            contexte: `R√®gne de Louis XV. √âpoque des <span class="glos-link" onclick="goToGlos('lumieres')">Lumi√®res</span>.`,
            social: `Virage vers le <strong>mara√Æchage intensif</strong> pour nourrir un Paris en pleine explosion d√©mographique.`,
            techno: `Am√©lioration des techniques de fumure (engrais urbains de Paris).`
        },
        {
            gen: "VI", name: "Pierre COQUEREL", dates: "Naissance 15 jan. 1730 | D√©c√®s 04 avr. 1816 (86 ans)", spouse: "Marie Louise MALO (1723-1802)",
            contexte: `T√©moin direct de la <span class="glos-link" onclick="goToGlos('revolution')">R√©volution Fran√ßaise</span>.`,
            defis: `Il traverse la Terreur et l'Empire de <span class="glos-link" onclick="goToGlos('napoleon1')">Napol√©on Ier</span>.`,
            social: `Passage du statut de Sujet de Sa Majest√© √† celui de Citoyen propri√©taire moderne.`
        },
        {
            gen: "VII", name: "Pierre COQUEREL", dates: "Naissance 15 mai 1761 | D√©c√®s 11 oct. 1852 (91 ans)", spouse: "Marie TROUET (1765-1836)",
            contexte: `Survit au <span class="glos-link" onclick="goToGlos('cholera')">Chol√©ra de 1832</span> (19 000 morts √† Paris).`,
            social: `Il voit le <span class="glos-link" onclick="goToGlos('canal')">Canal Saint-Denis</span> s'ouvrir en 1821 sur ses terres.`,
            techno: `D√©but de l'industrialisation massive qui grignote les champs d'Aubervilliers.`
        },
        {
            gen: "VIII", name: "Pierre Honor√© C. COQUEREL", dates: "Naissance 13 jan. 1789 | D√©c√®s 05 sept. 1851 (62 ans)", spouse: "Marie BOUDIER (1795-1875)",
            contexte: `R√®gne de Louis-Philippe. Arriv√©e r√©volutionnaire du chemin de fer en 1842.`,
            social: `Devient un <strong>Ma√Ætre Mara√Æcher</strong> hautement qualifi√© pour concurrencer les l√©gumes du Midi.`,
            techno: `Adoption des cultures forc√©es sous cloches de verre et ch√¢ssis.`
        },
        {
            gen: "IX", name: "Michel Lazare COQUEREL", dates: "Naissance 28 ao√ªt 1815 | D√©c√®s 14 mai 1885 (70 ans)", spouse: "Marie Louise DEMARS",
            contexte: `Second Empire et transformation de Paris par <span class="glos-link" onclick="goToGlos('haussmann')">Haussmann</span>.`,
            defis: `<strong>H√©ros du Si√®ge de 1870</strong> : il cultive sous les bombes prussiennes pour nourrir Paris affam√©.`,
            techno: `R√©sistance civile par l'agriculture mara√Æch√®re de survie.`
        },
        {
            gen: "X", name: "Pierre Honor√© COQUEREL", dates: "Naissance 03 oct. 1842 | D√©c√®s 10 jan. 1912 (70 ans)", spouse: "Constance BONNEAU",
            contexte: `Belle √âpoque. Invasion des usines chimiques polluantes.`,
            social: `La terre agricole dispara√Æt d√©finitivement sous le b√©ton industriel d'Aubervilliers.`,
            techno: `Arriv√©e du gaz de ville et de l'√©lectricit√© dans les foyers.`
        },
        {
            gen: "XI", name: "Louis Laurent COQUEREL", dates: "Naissance 10 juin 1880 | D√©c√®s 25 avr. 1964 (84 ans)", spouse: "Marie Louise LEMOINE (1887-1976)",
            contexte: `Traverse l'enfer de la <span class="glos-link" onclick="goToGlos('ww1')">Guerre de 1914-1918</span> et l'Occupation.`,
            social: `<strong>Dernier cultivateur</strong> de la lign√©e. Il voit la fin des chevaux de labour.`,
            techno: `Remplacement de la force animale par les premiers tracteurs agricoles.`
        },
        {
            gen: "XII", name: "Louis Alfred COQUEREL", dates: "Naissance 12 oct. 1912 | D√©c√®s 18 avr. 2002 (90 ans) | Mariage 08/08/1942", spouse: "Simone SELLIER (1914-2000)",
            contexte: `T√©moin des <span class="glos-link" onclick="goToGlos('trente')">Trente Glorieuses</span>.`,
            social: `Citoyen moderne, ouvrier et employ√©. Le lien professionnel avec la terre est rompu.`,
            techno: `L'√®re de l'automobile, de la t√©l√©vision et des loisirs de masse.`
        },
        {
            gen: "XIII", name: "Alain Robert COQUEREL", dates: "Naissance 03/03/1948", spouse: "Micheline GUILLEMIN",
            contexte: `Enfant du Baby Boom et de Mai 68.`,
            defis: `Gardien de la m√©moire. Il compile les archives pour les g√©n√©rations futures.`,
            social: `Soci√©t√© de services et √®re de l'informatique grand public.`
        },
        {
            gen: "XIV", name: "Arnaud COQUEREL", dates: "Naissance 15/11/1982 | Mariage 09/05/2015", spouse: "Isabelle PASCULLI (13/12/1980)",
            contexte: `R√©volution num√©rique d'<span class="glos-link" onclick="goToGlos('internet')">Internet</span>.`,
            defis: `Transmission du flambeau ancestral √† Manon et Arthur dans un monde globalis√©.`,
            techno: `Intelligence Artificielle et d√©fis climatiques du XXIe si√®cle.`
        },
        {
            gen: "XV", name: "Manon (2016) & Arthur (2019)", dates: "Avenir", spouse: "L'Avenir",
            contexte: `H√©ritiers directs de 15 g√©n√©rations d'histoire ininterrompue.`,
            defis: `√âcrire le prochain chapitre de la Saga Coquerel.`,
            techno: `Digital Natives (G√©n√©ration Alpha).`
        }
    ];

    // --- 3. GLOSSAIRE (RESTAURATION GRANDE TAILLE V32) ---
    const glossaire = {
        "religion": { t: "Guerres de Religion (1562-1598)", i: "Le d√©chirement du Royaume", c: "S√©rie de huit conflits civils atroces opposant catholiques et protestants en France. Marqu√©es par des massacres, elles ont ravag√© l'√©conomie rurale. Pierre l'Ancien a grandi dans ce climat d'ins√©curit√© permanente." },
        "henri4": { t: "Henri IV (1589-1610)", i: "Le Roi de la Paix", c: "Premier Bourbon, il pacifie la France. Son r√®gne marque le retour √† la prosp√©rit√© rurale ('la poule au pot'). Il est assassin√© en 1610 par Ravaillac." },
        "nantes": { t: "√âdit de Nantes (1598)", i: "Acte de tol√©rance", c: "Trait√© sign√© par Henri IV accordant aux protestants des droits de culte. Il permet √† la France de se reconstruire √©conomiquement." },
        "richelieu": { t: "Cardinal de Richelieu", i: "Architecte de l'√âtat", c: "Ministre de Louis XIII ayant bris√© les r√©sistances nobles pour b√¢tir une monarchie absolue et centralis√©e." },
        "fronde": { t: "La Fronde (1648-1653)", i: "Guerre Civile", c: "R√©voltes massives contre le pouvoir royal. Aubervilliers fut d√©vast√© par les arm√©es assi√©geant Paris." },
        "louis14": { t: "Louis XIV", i: "Le Roi-Soleil", c: "Apog√©e de l'absolutisme. Son r√®gne s'ach√®ve dans une mis√®re paysanne noire (hiver 1709) et des imp√¥ts √©crasants." },
        "hiver1709": { t: "Grand Hiver (1709)", i: "Apocalypse climatique", c: "Froid polaire brutal (-20¬∞C). Le bl√© g√®le, entra√Ænant une famine effroyable qui tue 600 000 Fran√ßais." },
        "lumieres": { t: "Les Lumi√®res", i: "L'essor de la Raison", c: "Mouvement intellectuel pr√¥nant le progr√®s et la science. Claude Coquerel modernise ses cultures sous cette influence." },
        "revolution": { t: "R√©volution Fran√ßaise (1789)", i: "La fin d'un monde", c: "Chute de la monarchie. Pour les Coquerel, cela signifie la fin des redevances seigneuriales et l'acc√®s √† la pleine propri√©t√©." },
        "napoleon1": { t: "Napol√©on Ier", i: "L'Empire", c: "G√©n√©ral devenu Empereur. Il r√©organise la France (Code Civil). Les Coquerel voient la cons√©cration de la classe rurale." },
        "cholera": { t: "Chol√©ra de 1832", i: "La peste bleue", c: "Pand√©mie foudroyante tuant 19 000 personnes √† Paris en 6 mois. Elle r√©v√®le l'insalubrit√© urbaine." },
        "canal": { t: "Canal Saint-Denis (1821)", i: "Cordon industriel", c: "Creus√© sous la Restauration, il traverse Aubervilliers. D√©clenche l'industrialisation massive au milieu des champs." },
        "haussmann": { t: "Baron Haussmann", i: "Le nouveau Paris", c: "Pr√©fet modernisant Paris. La croissance de la capitale demande des quantit√©s √©normes de l√©gumes frais aux Coquerel." },
        "ww1": { t: "Guerre de 1914-1918", i: "Sacrifice paysan", c: "Conflit mondial ayant saign√© les campagnes fran√ßaises. Louis Laurent a v√©cu ce traumatisme total." },
        "occupation": { t: "L'Occupation (1940-1944)", i: "Ann√©es sombres", c: "P√©riode de rationnement et r√©quisitions allemandes. Louis Alfred se marie sous cette oppression." },
        "trente": { t: "Trente Glorieuses (1945-1975)", i: "Boom √©conomique", c: "Trente ans de croissance. Pour la Saga, c'est la rupture d√©finitive avec le monde de la terre." },
        "internet": { t: "R√©volution Num√©rique", i: "Monde connect√©", c: "Permet de reconnecter les pi√®ces du puzzle familial √©parpill√©es sur 4 si√®cles." }
    };

    // --- 4. LOGIQUE TECHNIQUE (S√âCURIS√âE) ---
    function showPage(id, el) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        const targetPage = document.getElementById(id);
        if(targetPage) targetPage.classList.add('active');
        if(el) el.classList.add('active');
        window.scrollTo(0,0);
        document.getElementById('app-title').innerText = el ? el.querySelector('span:last-child').innerText : "Saga Coquerel";
        closeDetail('origine'); closeDetail('ancetres');
    }

    function openDetail(page, index) {
        const dataSet = (page === 'origine') ? origines : generations;
        const listDiv = (page === 'origine') ? 'orig-menu' : 'gen-list';
        const detailDiv = (page === 'origine') ? 'orig-detail' : 'gen-detail';
        const contentDiv = (page === 'origine') ? 'orig-content' : 'gen-content';
        const item = dataSet[index];

        document.getElementById(listDiv).style.display = 'none';
        document.getElementById(detailDiv).style.display = 'block';

        let html = `<div class="content-card">`;
        if(page === 'origine') {
            html += `<span class="vignette-badge">${item.badge}</span><h2>${item.title}</h2>${item.content}`;
        } else {
            html += `<span class="vignette-badge">G√©n. ${item.gen}</span><h2>${item.name}</h2>
                     <div class="sec-title">Dates (Naissance, D√©c√®s, √Çge)</div><p>${item.dates}</p>
                     <div class="sec-title">√âpouse</div><p style="color:#C2185B; font-weight:bold;">${item.spouse}</p>
                     <div class="sec-title">üëë Contexte & R√®gnes</div><div class="text-body">${item.contexte}</div>
                     <div class="sec-title">üöú Place Sociale & M√©tier</div><div class="text-body">${item.social}</div>
                     ${item.defis ? `<div class="sec-title">‚ö†Ô∏è D√©fis majeurs</div><div class="text-body">${item.defis}</div>` : ''}
                     <div class="sec-title">üõ† Technologie & Vie</div><div class="text-body">${item.techno}</div>`;
        }
        html += `</div>`;
        document.getElementById(contentDiv).innerHTML = html;
        window.scrollTo(0,0);
    }

    function closeDetail(page) {
        const listDiv = (page === 'origine') ? 'orig-menu' : 'gen-list';
        const detailDiv = (page === 'origine') ? 'orig-detail' : 'gen-detail';
        const listEl = document.getElementById(listDiv);
        const detailEl = document.getElementById(detailDiv);
        if(listEl) listEl.style.display = 'grid';
        if(detailEl) detailEl.style.display = 'none';
    }

    function goToGlos(key) {
        showPage('glossaire', document.querySelectorAll('.nav-item')[4]);
        setTimeout(() => {
            const target = document.getElementById('bio-' + key);
            if(target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 150);
    }

    function openZoom(src) { document.getElementById('zoom-img').src = src; document.getElementById('zoom-modal').style.display = 'flex'; }
    function closeZoom() { document.getElementById('zoom-modal').style.display = 'none'; }

    // INITIALISATION FORC√âE
    window.addEventListener('DOMContentLoaded', () => {
        const origMenu = document.getElementById('orig-menu');
        origines.forEach((o, i) => { origMenu.innerHTML += `<div class="vignette" onclick="openDetail('origine', ${i})"><span class="vignette-badge">${o.badge}</span><div class="vignette-title">${o.title}</div></div>`; });

        const genList = document.getElementById('gen-list');
        generations.forEach((g, i) => { genList.innerHTML += `<div class="vignette" onclick="openDetail('ancetres', ${i})"><span class="vignette-badge">G√©n. ${g.gen}</span><div class="vignette-title">${g.name}</div></div>`; });

        const glosDiv = document.getElementById('glossaire-content');
        Object.keys(glossaire).sort().forEach(key => { const item = glossaire[key]; glosDiv.innerHTML += `<div class="glos-item" id="bio-${key}"><b>${item.t}</b><i>${item.i}</i><p>${item.c}</p></div>`; });

        const timelineBody = document.getElementById('timeline-body');
        const timelineData = [["911", "Rollon", "Normandie"], ["1066", "Hastings", "Angleterre"], ["1600", "I. Pierre", "Henri IV"], ["1789", "VIII. Pierre", "R√©volution"], ["1870", "IX. Michel", "Si√®ge Paris"], ["2026", "XV. Manon & Arthur", "Avenir"]];
        timelineData.forEach(t => { timelineBody.innerHTML += `<tr><td style="padding:10px; border-bottom:1px solid #eee;"><b>${t[0]}</b></td><td style="padding:10px; border-bottom:1px solid #eee;">${t[1]}</td><td style="padding:10px; border-bottom:1px solid #eee;">${t[2]}</td></tr>`; });
    });

    if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
</script>

</body>
</html>